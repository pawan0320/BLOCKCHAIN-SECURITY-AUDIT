import subprocess

def scan_blockchain_nodes(target_ip_range):
    print(f"[*] Scanning network range {target_ip_range} for open ports and vulnerabilities...")
    
    # Install nmap if not already installed
    try:
        # Check if nmap is already installed
        subprocess.run(["nmap", "--version"], stdout=subprocess.PIPE, stderr=subprocess.PIPE, check=True)  
    except FileNotFoundError:
        print("[*] Installing nmap...")
        # Install nmap using apt-get (for Debian-based systems)
        subprocess.run(["apt-get", "update"], stdout=subprocess.PIPE, stderr=subprocess.PIPE, check=True)
        subprocess.run(["apt-get", "install", "-y", "nmap"], stdout=subprocess.PIPE, stderr=subprocess.PIPE, check=True)
        print("[*] Nmap installed successfully.")
    
    # Run nmap scan
    result = subprocess.run(["nmap", "-sV", "-p-", target_ip_range], stdout=subprocess.PIPE)
    
    # Display the results
    print(result.stdout.decode('utf-8'))

# Example usage
target_ip_range = "192.168.1.0/24"  # Adjust the IP range based on the blockchain node network
scan_blockchain_nodes(target_ip_range)
